package controller;

import java.io.IOException;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet("*.bo")
public class BoardFrontController extends HttpServlet{
	
	protected void doProcess(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {
		System.out.println("BoardFrontController");
		//Post방식을 위한 한글 처리
		request.setCharacterEncoding("UTF-8");
		//요청된 서블릿 주소를 추출
		String command = request.getServletPath();
		System.out.println("command : "+command);
		
		if(command.equals("/BoardWriteForm.bo")) {
//			System.out.println("BoardWriteForm.bo 로 이동");
			//http://localhost:8080/MVC_Board/board/board_write_form.jsp
			//위의 URL로 포워딩 할 때 해당 주소를 숨기기 위해
			//요청 서블릿 주소를 그대로 유지하려면 Dispatcher 방식으로 포워딩
			//request 객체의 getRequestDispatcher() 메서드를 호출하여
			//RequestDispatcher객체를 리턴 받기
			//=>포워딩할 주소를 파라미터로 전달
			//		(현재 위치의 board폴더 내의 "board_write_form.jsp"
			String path="/qna_board_write.jsp";//포워딩 할 주소
			RequestDispatcher dispatcher = request.getRequestDispatcher(path);
			dispatcher.forward(request, response);
		}
	}
	
	//서블릿 요청이 Get 방식 일 경우 자동으로 호출되는 메서드
	@Override
	protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doProcess(request, response);
	}
	
	//서블릿 요청이 POST 방식일 경우 자동으로 호출되는 메서드
	@Override
	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		doProcess(request, response);
	}
}
